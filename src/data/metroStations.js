// Datos completos de todas las estaciones del Metro CDMX
// Incluye las 12 líneas: 1-9, A, B, 12

export const metroLines = {
  'Línea 1': {
    name: 'Línea 1',
    color: '#FF1493', // Rosa
    stations: [
      { id: '1-1', name: 'Observatorio', line: 'Línea 1', color: '#FF1493' },
      { id: '1-2', name: 'Tacubaya', line: 'Línea 1', color: '#FF1493' },
      { id: '1-3', name: 'Juanacatlán', line: 'Línea 1', color: '#FF1493' },
      { id: '1-4', name: 'Chapultepec', line: 'Línea 1', color: '#FF1493' },
      { id: '1-5', name: 'Sevilla', line: 'Línea 1', color: '#FF1493' },
      { id: '1-6', name: 'Insurgentes Sur', line: 'Línea 1', color: '#FF1493' },
      { id: '1-7', name: 'Cuauhtémoc', line: 'Línea 1', color: '#FF1493' },
      { id: '1-8', name: 'Balderas', line: 'Línea 1', color: '#FF1493' },
      { id: '1-9', name: 'Salto del Agua', line: 'Línea 1', color: '#FF1493' },
      { id: '1-10', name: 'Isabel la Católica', line: 'Línea 1', color: '#FF1493' },
      { id: '1-11', name: 'Pino Suárez', line: 'Línea 1', color: '#FF1493' },
      { id: '1-12', name: 'Merced', line: 'Línea 1', color: '#FF1493' },
      { id: '1-13', name: 'Candelaria', line: 'Línea 1', color: '#FF1493' },
      { id: '1-14', name: 'San Lázaro', line: 'Línea 1', color: '#FF1493' },
      { id: '1-15', name: 'Moctezuma', line: 'Línea 1', color: '#FF1493' },
      { id: '1-16', name: 'Balbuena', line: 'Línea 1', color: '#FF1493' },
      { id: '1-17', name: 'Boulevard Puerto Aéreo', line: 'Línea 1', color: '#FF1493' },
      { id: '1-18', name: 'Gómez Farías', line: 'Línea 1', color: '#FF1493' },
      { id: '1-19', name: 'Zaragoza', line: 'Línea 1', color: '#FF1493' },
      { id: '1-20', name: 'Pantitlán', line: 'Línea 1', color: '#FF1493' }
    ]
  },
  'Línea 2': {
    name: 'Línea 2',
    color: '#0000FF', // Azul
    stations: [
      { id: '2-1', name: 'Cuatro Caminos', line: 'Línea 2', color: '#0000FF' },
      { id: '2-2', name: 'Panteones', line: 'Línea 2', color: '#0000FF' },
      { id: '2-3', name: 'Tacuba', line: 'Línea 2', color: '#0000FF' },
      { id: '2-4', name: 'Cuitláhuac', line: 'Línea 2', color: '#0000FF' },
      { id: '2-5', name: 'Popotla', line: 'Línea 2', color: '#0000FF' },
      { id: '2-6', name: 'Colegio Militar', line: 'Línea 2', color: '#0000FF' },
      { id: '2-7', name: 'Normal', line: 'Línea 2', color: '#0000FF' },
      { id: '2-8', name: 'San Cosme', line: 'Línea 2', color: '#0000FF' },
      { id: '2-9', name: 'Revolución', line: 'Línea 2', color: '#0000FF' },
      { id: '2-10', name: 'Hidalgo', line: 'Línea 2', color: '#0000FF' },
      { id: '2-11', name: 'Bellas Artes', line: 'Línea 2', color: '#0000FF' },
      { id: '2-12', name: 'Allende', line: 'Línea 2', color: '#0000FF' },
      { id: '2-13', name: 'Zócalo', line: 'Línea 2', color: '#0000FF' },
      { id: '2-14', name: 'Pino Suárez', line: 'Línea 2', color: '#0000FF' },
      { id: '2-15', name: 'San Antonio Abad', line: 'Línea 2', color: '#0000FF' },
      { id: '2-16', name: 'Chabacano', line: 'Línea 2', color: '#0000FF' },
      { id: '2-17', name: 'Viaducto', line: 'Línea 2', color: '#0000FF' },
      { id: '2-18', name: 'Xola', line: 'Línea 2', color: '#0000FF' },
      { id: '2-19', name: 'Villa de Cortés', line: 'Línea 2', color: '#0000FF' },
      { id: '2-20', name: 'Nativitas', line: 'Línea 2', color: '#0000FF' },
      { id: '2-21', name: 'Portales', line: 'Línea 2', color: '#0000FF' },
      { id: '2-22', name: 'Ermita', line: 'Línea 2', color: '#0000FF' },
      { id: '2-23', name: 'General Anaya', line: 'Línea 2', color: '#0000FF' },
      { id: '2-24', name: 'Tasqueña', line: 'Línea 2', color: '#0000FF' }
    ]
  },
  'Línea 3': {
    name: 'Línea 3',
    color: '#008000', // Verde
    stations: [
      { id: '3-1', name: 'Indios Verdes', line: 'Línea 3', color: '#008000' },
      { id: '3-2', name: 'Deportivo 18 de Marzo', line: 'Línea 3', color: '#008000' },
      { id: '3-3', name: 'Potrero', line: 'Línea 3', color: '#008000' },
      { id: '3-4', name: 'La Raza', line: 'Línea 3', color: '#008000' },
      { id: '3-5', name: 'Tlatelolco', line: 'Línea 3', color: '#008000' },
      { id: '3-6', name: 'Guerrero', line: 'Línea 3', color: '#008000' },
      { id: '3-7', name: 'Hidalgo', line: 'Línea 3', color: '#008000' },
      { id: '3-8', name: 'Juárez', line: 'Línea 3', color: '#008000' },
      { id: '3-9', name: 'Balderas', line: 'Línea 3', color: '#008000' },
      { id: '3-10', name: 'Niños Héroes', line: 'Línea 3', color: '#008000' },
      { id: '3-11', name: 'Hospital General', line: 'Línea 3', color: '#008000' },
      { id: '3-12', name: 'Centro Médico', line: 'Línea 3', color: '#008000' },
      { id: '3-13', name: 'Etiopía', line: 'Línea 3', color: '#008000' },
      { id: '3-14', name: 'Eugenia', line: 'Línea 3', color: '#008000' },
      { id: '3-15', name: 'División del Norte', line: 'Línea 3', color: '#008000' },
      { id: '3-16', name: 'Zapata', line: 'Línea 3', color: '#008000' },
      { id: '3-17', name: 'Coyoacán', line: 'Línea 3', color: '#008000' },
      { id: '3-18', name: 'Viveros', line: 'Línea 3', color: '#008000' },
      { id: '3-19', name: 'Miguel Ángel de Quevedo', line: 'Línea 3', color: '#008000' },
      { id: '3-20', name: 'Copilco', line: 'Línea 3', color: '#008000' },
      { id: '3-21', name: 'Universidad', line: 'Línea 3', color: '#008000' }
    ]
  },
  'Línea 4': {
    name: 'Línea 4',
    color: '#800080', // Morado
    stations: [
      { id: '4-1', name: 'Martín Carrera', line: 'Línea 4', color: '#800080' },
      { id: '4-2', name: 'Talismán', line: 'Línea 4', color: '#800080' },
      { id: '4-3', name: 'Bondojito', line: 'Línea 4', color: '#800080' },
      { id: '4-4', name: 'Consulado', line: 'Línea 4', color: '#800080' },
      { id: '4-5', name: 'Canal del Norte', line: 'Línea 4', color: '#800080' },
      { id: '4-6', name: 'Morelos', line: 'Línea 4', color: '#800080' },
      { id: '4-7', name: 'Candelaria', line: 'Línea 4', color: '#800080' },
      { id: '4-8', name: 'Fray Servando', line: 'Línea 4', color: '#800080' },
      { id: '4-9', name: 'Jamaica', line: 'Línea 4', color: '#800080' },
      { id: '4-10', name: 'Santa Anita', line: 'Línea 4', color: '#800080' }
    ]
  },
  'Línea 5': {
    name: 'Línea 5',
    color: '#FFFF00', // Amarillo
    stations: [
      { id: '5-1', name: 'Politécnico', line: 'Línea 5', color: '#FFFF00' },
      { id: '5-2', name: 'Instituto del Petróleo', line: 'Línea 5', color: '#FFFF00' },
      { id: '5-3', name: 'Autobuses del Norte', line: 'Línea 5', color: '#FFFF00' },
      { id: '5-4', name: 'La Raza', line: 'Línea 5', color: '#FFFF00' },
      { id: '5-5', name: 'Misterios', line: 'Línea 5', color: '#FFFF00' },
      { id: '5-6', name: 'Valle Gómez', line: 'Línea 5', color: '#FFFF00' },
      { id: '5-7', name: 'Consulado', line: 'Línea 5', color: '#FFFF00' },
      { id: '5-8', name: 'Eduardo Molina', line: 'Línea 5', color: '#FFFF00' },
      { id: '5-9', name: 'Aragón', line: 'Línea 5', color: '#FFFF00' },
      { id: '5-10', name: 'Oceanía', line: 'Línea 5', color: '#FFFF00' },
      { id: '5-11', name: 'Terminal Aérea', line: 'Línea 5', color: '#FFFF00' },
      { id: '5-12', name: 'Hangares', line: 'Línea 5', color: '#FFFF00' },
      { id: '5-13', name: 'Pantitlán', line: 'Línea 5', color: '#FFFF00' }
    ]
  },
  'Línea 6': {
    name: 'Línea 6',
    color: '#FF0000', // Rojo
    stations: [
      { id: '6-1', name: 'El Rosario', line: 'Línea 6', color: '#FF0000' },
      { id: '6-2', name: 'Tezozómoc', line: 'Línea 6', color: '#FF0000' },
      { id: '6-3', name: 'UAM-Azcapotzalco', line: 'Línea 6', color: '#FF0000' },
      { id: '6-4', name: 'Ferrería', line: 'Línea 6', color: '#FF0000' },
      { id: '6-5', name: 'Norte 45', line: 'Línea 6', color: '#FF0000' },
      { id: '6-6', name: 'Vallejo', line: 'Línea 6', color: '#FF0000' },
      { id: '6-7', name: 'Instituto del Petróleo', line: 'Línea 6', color: '#FF0000' },
      { id: '6-8', name: 'Lindavista', line: 'Línea 6', color: '#FF0000' },
      { id: '6-9', name: 'Deportivo 18 de Marzo', line: 'Línea 6', color: '#FF0000' },
      { id: '6-10', name: 'La Villa-Basílica', line: 'Línea 6', color: '#FF0000' },
      { id: '6-11', name: 'Martín Carrera', line: 'Línea 6', color: '#FF0000' }
    ]
  },
  'Línea 7': {
    name: 'Línea 7',
    color: '#FFA500', // Naranja
    stations: [
      { id: '7-1', name: 'El Rosario', line: 'Línea 7', color: '#FFA500' },
      { id: '7-2', name: 'Aquiles Serdán', line: 'Línea 7', color: '#FFA500' },
      { id: '7-3', name: 'Camarones', line: 'Línea 7', color: '#FFA500' },
      { id: '7-4', name: 'Refinería', line: 'Línea 7', color: '#FFA500' },
      { id: '7-5', name: 'Tacuba', line: 'Línea 7', color: '#FFA500' },
      { id: '7-6', name: 'San Joaquín', line: 'Línea 7', color: '#FFA500' },
      { id: '7-7', name: 'Polanco', line: 'Línea 7', color: '#FFA500' },
      { id: '7-8', name: 'Auditorio', line: 'Línea 7', color: '#FFA500' },
      { id: '7-9', name: 'Constituyentes', line: 'Línea 7', color: '#FFA500' },
      { id: '7-10', name: 'Tacubaya', line: 'Línea 7', color: '#FFA500' },
      { id: '7-11', name: 'San Pedro de los Pinos', line: 'Línea 7', color: '#FFA500' },
      { id: '7-12', name: 'San Antonio', line: 'Línea 7', color: '#FFA500' },
      { id: '7-13', name: 'Mixcoac', line: 'Línea 7', color: '#FFA500' },
      { id: '7-14', name: 'Barranca del Muerto', line: 'Línea 7', color: '#FFA500' }
    ]
  },
  'Línea 8': {
    name: 'Línea 8',
    color: '#008080', // Verde azulado
    stations: [
      { id: '8-1', name: 'Garibaldi', line: 'Línea 8', color: '#008080' },
      { id: '8-2', name: 'Bellas Artes', line: 'Línea 8', color: '#008080' },
      { id: '8-3', name: 'San Juan de Letrán', line: 'Línea 8', color: '#008080' },
      { id: '8-4', name: 'Salto del Agua', line: 'Línea 8', color: '#008080' },
      { id: '8-5', name: 'Doctores', line: 'Línea 8', color: '#008080' },
      { id: '8-6', name: 'Obrera', line: 'Línea 8', color: '#008080' },
      { id: '8-7', name: 'Chabacano', line: 'Línea 8', color: '#008080' },
      { id: '8-8', name: 'La Viga', line: 'Línea 8', color: '#008080' },
      { id: '8-9', name: 'Santa Anita', line: 'Línea 8', color: '#008080' },
      { id: '8-10', name: 'Coyuya', line: 'Línea 8', color: '#008080' },
      { id: '8-11', name: 'Iztacalco', line: 'Línea 8', color: '#008080' },
      { id: '8-12', name: 'Apatlaco', line: 'Línea 8', color: '#008080' },
      { id: '8-13', name: 'Aculco', line: 'Línea 8', color: '#008080' },
      { id: '8-14', name: 'Escuadrón 201', line: 'Línea 8', color: '#008080' },
      { id: '8-15', name: 'Atlalilco', line: 'Línea 8', color: '#008080' },
      { id: '8-16', name: 'Iztapalapa', line: 'Línea 8', color: '#008080' },
      { id: '8-17', name: 'Cerro de la Estrella', line: 'Línea 8', color: '#008080' },
      { id: '8-18', name: 'UAM-I', line: 'Línea 8', color: '#008080' },
      { id: '8-19', name: 'Constitución de 1917', line: 'Línea 8', color: '#008080' }
    ]
  },
  'Línea 9': {
    name: 'Línea 9',
    color: '#8B4513', // Marrón
    stations: [
      { id: '9-1', name: 'Tacubaya', line: 'Línea 9', color: '#8B4513' },
      { id: '9-2', name: 'Patriotismo', line: 'Línea 9', color: '#8B4513' },
      { id: '9-3', name: 'Chilpancingo', line: 'Línea 9', color: '#8B4513' },
      { id: '9-4', name: 'Centro Médico', line: 'Línea 9', color: '#8B4513' },
      { id: '9-5', name: 'Lázaro Cárdenas', line: 'Línea 9', color: '#8B4513' },
      { id: '9-6', name: 'Chabacano', line: 'Línea 9', color: '#8B4513' },
      { id: '9-7', name: 'Jamaica', line: 'Línea 9', color: '#8B4513' },
      { id: '9-8', name: 'Mixiuhca', line: 'Línea 9', color: '#8B4513' },
      { id: '9-9', name: 'Velódromo', line: 'Línea 9', color: '#8B4513' },
      { id: '9-10', name: 'Ciudad Deportiva', line: 'Línea 9', color: '#8B4513' },
      { id: '9-11', name: 'Puebla', line: 'Línea 9', color: '#8B4513' },
      { id: '9-12', name: 'Pantitlán', line: 'Línea 9', color: '#8B4513' }
    ]
  },
  'Línea A': {
    name: 'Línea A',
    color: '#800080', // Morado
    stations: [
      { id: 'A-1', name: 'Pantitlán', line: 'Línea A', color: '#800080' },
      { id: 'A-2', name: 'Agrícola Oriental', line: 'Línea A', color: '#800080' },
      { id: 'A-3', name: 'Canal de San Juan', line: 'Línea A', color: '#800080' },
      { id: 'A-4', name: 'Tepalcates', line: 'Línea A', color: '#800080' },
      { id: 'A-5', name: 'Guelatao', line: 'Línea A', color: '#800080' },
      { id: 'A-6', name: 'Peñón Viejo', line: 'Línea A', color: '#800080' },
      { id: 'A-7', name: 'Acatitla', line: 'Línea A', color: '#800080' },
      { id: 'A-8', name: 'Santa Marta', line: 'Línea A', color: '#800080' },
      { id: 'A-9', name: 'Los Reyes', line: 'Línea A', color: '#800080' },
      { id: 'A-10', name: 'La Paz', line: 'Línea A', color: '#800080' }
    ]
  },
  'Línea B': {
    name: 'Línea B',
    color: '#008000', // Verde
    stations: [
      { id: 'B-1', name: 'Buenavista', line: 'Línea B', color: '#008000' },
      { id: 'B-2', name: 'Guerrero', line: 'Línea B', color: '#008000' },
      { id: 'B-3', name: 'Garibaldi', line: 'Línea B', color: '#008000' },
      { id: 'B-4', name: 'Lagunilla', line: 'Línea B', color: '#008000' },
      { id: 'B-5', name: 'Tepito', line: 'Línea B', color: '#008000' },
      { id: 'B-6', name: 'Morelos', line: 'Línea B', color: '#008000' },
      { id: 'B-7', name: 'San Lázaro', line: 'Línea B', color: '#008000' },
      { id: 'B-8', name: 'Ricardo Flores Magón', line: 'Línea B', color: '#008000' },
      { id: 'B-9', name: 'Romero Rubio', line: 'Línea B', color: '#008000' },
      { id: 'B-10', name: 'Oceanía', line: 'Línea B', color: '#008000' },
      { id: 'B-11', name: 'Deportivo Oceanía', line: 'Línea B', color: '#008000' },
      { id: 'B-12', name: 'Bosque de Aragón', line: 'Línea B', color: '#008000' },
      { id: 'B-13', name: 'Villa de Aragón', line: 'Línea B', color: '#008000' },
      { id: 'B-14', name: 'Nezahualcóyotl', line: 'Línea B', color: '#008000' },
      { id: 'B-15', name: 'Impulsora', line: 'Línea B', color: '#008000' },
      { id: 'B-16', name: 'Río de los Remedios', line: 'Línea B', color: '#008000' },
      { id: 'B-17', name: 'Múgica', line: 'Línea B', color: '#008000' },
      { id: 'B-18', name: 'Valle de Aragón', line: 'Línea B', color: '#008000' },
      { id: 'B-19', name: 'Ecatepec', line: 'Línea B', color: '#008000' },
      { id: 'B-20', name: 'Olímpica', line: 'Línea B', color: '#008000' },
      { id: 'B-21', name: 'Plaza Aragón', line: 'Línea B', color: '#008000' },
      { id: 'B-22', name: 'Ciudad Azteca', line: 'Línea B', color: '#008000' }
    ]
  },
  'Línea 12': {
    name: 'Línea 12',
    color: '#FFD700', // Dorado
    stations: [
      { id: '12-1', name: 'Mixcoac', line: 'Línea 12', color: '#FFD700' },
      { id: '12-2', name: 'Insurgentes Sur', line: 'Línea 12', color: '#FFD700' },
      { id: '12-3', name: 'Hospital 20 de Noviembre', line: 'Línea 12', color: '#FFD700' },
      { id: '12-4', name: 'Zapata', line: 'Línea 12', color: '#FFD700' },
      { id: '12-5', name: 'Parque de los Venados', line: 'Línea 12', color: '#FFD700' },
      { id: '12-6', name: 'Eje Central', line: 'Línea 12', color: '#FFD700' },
      { id: '12-7', name: 'Ermita', line: 'Línea 12', color: '#FFD700' },
      { id: '12-8', name: 'Mexicaltzingo', line: 'Línea 12', color: '#FFD700' },
      { id: '12-9', name: 'Atlalilco', line: 'Línea 12', color: '#FFD700' },
      { id: '12-10', name: 'Culhuacán', line: 'Línea 12', color: '#FFD700' },
      { id: '12-11', name: 'San Andrés Tomatlán', line: 'Línea 12', color: '#FFD700' },
      { id: '12-12', name: 'Lomas Estrella', line: 'Línea 12', color: '#FFD700' },
      { id: '12-13', name: 'Calle 11', line: 'Línea 12', color: '#FFD700' },
      { id: '12-14', name: 'Periférico Oriente', line: 'Línea 12', color: '#FFD700' },
      { id: '12-15', name: 'Tezonco', line: 'Línea 12', color: '#FFD700' },
      { id: '12-16', name: 'Olivos', line: 'Línea 12', color: '#FFD700' },
      { id: '12-17', name: 'Nopalera', line: 'Línea 12', color: '#FFD700' },
      { id: '12-18', name: 'Zapotitlán', line: 'Línea 12', color: '#FFD700' },
      { id: '12-19', name: 'Tlaltenco', line: 'Línea 12', color: '#FFD700' },
      { id: '12-20', name: 'Tláhuac', line: 'Línea 12', color: '#FFD700' }
    ]
  }
};

// Función para obtener todas las estaciones en un array plano
export const getAllStations = () => {
  const allStations = [];
  Object.values(metroLines).forEach(line => {
    allStations.push(...line.stations);
  });
  return allStations;
};

// Función para obtener estaciones de una línea específica
export const getStationsByLine = (lineName) => {
  return metroLines[lineName]?.stations || [];
};

// Función para obtener información de una línea
export const getLineInfo = (lineName) => {
  return metroLines[lineName] || null;
};

// Función para calcular ruta entre estaciones de la misma línea
export const calculateRouteOnSameLine = (originId, destinationId) => {
  const originStation = getAllStations().find(s => s.id === originId);
  const destStation = getAllStations().find(s => s.id === destinationId);

  if (!originStation || !destStation || originStation.line !== destStation.line) {
    return null;
  }

  const lineStations = getStationsByLine(originStation.line);
  const originIndex = lineStations.findIndex(s => s.id === originId);
  const destIndex = lineStations.findIndex(s => s.id === destinationId);

  if (originIndex === -1 || destIndex === -1) {
    return null;
  }

  const stationCount = Math.abs(destIndex - originIndex);
  const time = stationCount * 2.5; // 2.5 minutos por estación

  return {
    time,
    stations: stationCount,
    origin: originStation,
    destination: destStation,
    line: originStation.line,
    transfers: 0
  };
};

// Función para calcular ruta con transbordos (versión simplificada)
export const calculateRouteWithTransfers = (originId, destinationId) => {
  const originStation = getAllStations().find(s => s.id === originId);
  const destStation = getAllStations().find(s => s.id === destinationId);

  if (!originStation || !destStation) {
    return null;
  }

  // Si están en la misma línea, usar cálculo directo
  if (originStation.line === destStation.line) {
    return calculateRouteOnSameLine(originId, destinationId);
  }

  // Para diferentes líneas, buscar estaciones de transbordo comunes
  const transferStations = findTransferStations(originStation.line, destStation.line);

  if (transferStations.length === 0) {
    return null; // No hay transbordo directo
  }

  // Usar el primer transbordo disponible (simplificado)
  const transfer = transferStations[0];

  const route1 = calculateRouteOnSameLine(originId, transfer.station1.id);
  const route2 = calculateRouteOnSameLine(transfer.station2.id, destinationId);

  if (!route1 || !route2) {
    return null;
  }

  const totalTime = route1.time + route2.time + 5; // 5 minutos para transbordo
  const totalStations = route1.stations + route2.stations;

  return {
    time: totalTime,
    stations: totalStations,
    origin: originStation,
    destination: destStation,
    transfers: 1,
    transferStation: transfer,
    segments: [route1, route2]
  };
};

// Función para encontrar estaciones de transbordo entre dos líneas
export const findTransferStations = (line1, line2) => {
  const stations1 = getStationsByLine(line1);
  const stations2 = getStationsByLine(line2);
  const transfers = [];

  stations1.forEach(station1 => {
    stations2.forEach(station2 => {
      if (station1.name === station2.name) {
        transfers.push({
          station1,
          station2,
          name: station1.name
        });
      }
    });
  });

  return transfers;
};
